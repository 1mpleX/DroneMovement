<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Drone Path Predictor</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
    <body>
    <div class="container">
        <h1>Drone Path Predictor</h1>

        <label>Drone ID:</label>
        <input type="text" id="droneId" value="drone_01"/>
        <label>Drone Type:</label>
        <input type="text" id="droneType" value="quadcopter"/>

        <h2>Telemetry Data</h2>

        <div id="telemetry-container"></div>

        <button onclick="addTelemetryPoint()">Add Telemetry Point</button>
        <button onclick="detectDroneType()">Detect Drone Type</button>

        <br><br>
        <label>Загрузить JSON файл с телеметрией:</label>
        <input type="file" id="jsonFileInput" accept="application/json"/>
        <button onclick="loadJsonFile()">Загрузить</button>
        <br><br>

        <label>Способ построения графика:</label>
        <select id="graphMethod" class="styled-select">
            <option value="approximation">Аппроксимация</option>
            <option value="interpolation">Интерполяция</option>
        </select>

        <br><br>
        <label>Количество точек для построения графика:</label>
        <input type="number" id="pointsLimit" min="2" max="1000" value="4" class="styled-input"/>
        <br><br>

        <button onclick="toggleAllCalculations()" id="stopBtn">Старт</button>

        <h2>Server Response</h2>
        <pre id="response">Waiting...</pre>

        <h2>Предсказание траектории</h2>
        <canvas id="deviationChart" width="600" height="300"></canvas>
        <h2>Отклонение прогноза от реальности</h2>
        <canvas id="forecastDeviationChart" width="600" height="300"></canvas>
        <h2>Отклонение после поступления новых координат</h2>
        <canvas id="realtimeDeviationChart" width="600" height="300"></canvas>
        
        <h2>3D Визуализация движения дрона</h2>
        <div id="3d-container">
            <canvas id="3dCanvas"></canvas>
            <div id="3d-controls">
                <button onclick="resetCamera()">Сброс камеры</button>
                <button onclick="clearGraph()">Очистить график</button>
                <button onclick="recreate3DVisualization()">Увеличить окно</button>
            </div>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/telemetry.js"></script>
    <script src="js/api.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/3d-visualization.js"></script>
    <script src="js/init.js"></script>
    </body>
</html>
